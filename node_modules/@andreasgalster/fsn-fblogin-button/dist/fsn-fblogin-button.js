'use strict';

require('@polymer/polymer/polymer.html');
require('@polymer/app-route/app-location.html');
require('@polymer/iron-icon/iron-icon.html');

require('@andreasgalster/fsn-icons/dist/fsn-icons.html');

Polymer({
  is: 'fsn-fblogin-button',
  properties: {
    redirectTo: String
  },
  listeners: {
    'tap': 'login'
  },
  login: function login() {
    var _this = this;

    // alert('yo terence are you seeing this?');
    // console.log('yo terence are you seeing this?');
    mixpanel.track('userSignupClick');
    Meteor.loginWithFacebook({
      requestPermissions: ['public_profile', 'user_about_me', 'user_birthday']
    }, function (err) {
      if (err) {
        // alert('yo terence are you seeing this?');
        // alert(err);
        // console.log(err);
        if (Meteor.isProduction) {
          mixpanel.track('userSignupError');
        }
      } else {
        if (Meteor.isProduction) {
          mixpanel.track('userSignupSuccessful');
        }
        _this.path = '/' + _this.redirectTo;
      }
    });
  }
});