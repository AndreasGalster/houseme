
<dom-module id="main-view">

  <template>
    <style include="view-styles"></style>
    <style include="houseme-styles"></style>
    <style>

      :host {
        @apply(--fixed-view);
        /*@apply(--bg-img);*/
      }

      section {
        @apply(--fill-view);
        @apply(--layout);
        @apply(--layout-center-center);
        background: white;
      }

      paper-spinner {
        width: 40px;
        height: 40px;
        --paper-spinner-layer-1-color: var(--blue);
        --paper-spinner-layer-2-color: var(--orange);
        --paper-spinner-layer-3-color: var(--blue);
        --paper-spinner-layer-4-color: var(--orange);
        --paper-spinner-stroke-width: 2px;
      }



    </style>

    <paper-header-panel mode='seamed'>
      <paper-navigation selected-page={{path}} class='paper-header'></paper-navigation>
      <div class='content'>

        <app-location route={{route}} path={{path}}></app-location>
        <app-route route={{route}}
                      pattern="/:page"
                      data={{pageData}}
                      tail={{pageTail}}></app-route>

        <!-- <fsn-meta-tags attr-for-selected="data-route" selected=[[path]]> -->
        <div>
          <fsn-meta-tag path='/'
                        title='Finding roommates made easy - houseme'
                        meta='{ "description": "Are you looking for a roommate? We will help you find the perfect one!" }'>
          </fsn-meta-tag>

          <fsn-meta-tag meta='
          { "property": "og:title", "content": "Finding roommates made easy - houseme" }'>
          </fsn-meta-tag>
          <fsn-meta-tag meta='
          { "property": "og:image", "content": "https://www.houseme.space/img/bg1.jpg" }'>
          </fsn-meta-tag>
          <fsn-meta-tag meta='
          { "property": "og:site_name", "content": "houseme roommate finder" }'>
          </fsn-meta-tag>
          <fsn-meta-tag meta='
          { "property": "og:description", "content": "Are you looking for a roommate? We will help you find the perfect one!" }'>
          </fsn-meta-tag>
        </div>


        <iron-lazy-pages attr-for-selected="data-route" selected=[[path]]>
          <template is="iron-lazy-page" data-route="/">
            <landing-view></landing-view>
          </template>
          <template is="iron-lazy-page" data-route="/signup">
            <landing-view></landing-view>
          </template>
          <template is="iron-lazy-page" data-route="/profile">
            <profile-view></profile-view>
          </template>
          <template is="iron-lazy-page" data-route="/messages">
            <messages-view other-user-id=[[otherUserId]]></messages-view>
          </template>
          <template is="iron-lazy-page" data-route="/search">
            <search-view other-user-id={{otherUserId}}></search-view>
          </template>
          <template is="iron-lazy-page" data-route="/talk">
            <talk-view></talk-view>
          </template>
        </iron-lazy-pages>
<!--

<iron-pages attr-for-selected="data-route" selected=[[path]]>
<landing-view data-route="/"></landing-view>
<landing-view data-route="/signup"></landing-view>
<profile-view data-route="/profile"></profile-view>
<messages-view data-route="/messages" other-user-id=[[otherUserId]]></messages-view>
<search-view data-route="/search" other-user-id={{otherUserId}}></search-view>
</iron-pages>
        <section hidden$=[[!isLoading]]>
          <paper-spinner active=[[isLoading]]></paper-spinner>
        </section>
      -->



      </div>
    </paper-header-panel>

  </template>
</dom-module>

<script>
require('@polymer/polymer/polymer.html');
require('@polymer/paper-header-panel/paper-header-panel.html');
require('@polymer/paper-spinner/paper-spinner.html');
require('@polymer/iron-flex-layout/iron-flex-layout.html');
require('@polymer/app-route/app-route.html');
require('@polymer/app-route/app-location.html');
require('@polymer/iron-lazy-pages/iron-lazy-pages.html');


require('@andreasgalster/fsn-boilerplate/fsn-boilerplate.html');
require('@andreasgalster/fsn-meta-tags/fsn-meta-tag.html');
require('../components/paper-navigation/paper-navigation.html');

  // require('./search-view.html');
  // require('/imports/ui/views/search-view.html');
  // require('/imports/ui/views/messages-view.html');
  // require('/imports/ui/views/profile-view.html');
  // require('/imports/ui/views/talk-view.html');
  // require('/imports/ui/views/signup-view.html');




Polymer({
  is: 'main-view',
  properties: {
    otherUserId: {
      type: String,
    }
  },
  observers: [
    // '_lockScroll(isLoading)'
  ],

  notify: function() {
    this.notifyPath('otherUserId');
  },

  _lockScroll: function(isLoading) {
    if (isLoading) {
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = 'visible';
    }
  },

  _loadViewDependency: function(path) {
    // switch (path) {
    //   case '/search':
    //     require('/imports/ui/views/search-view.html');
    //     break;
    //   case '/messages':
    //     require('/imports/ui/views/messages-view.html');
    //     break;
    //   case '/profile':
    //     require('/imports/ui/views/profile-view.html');
    //     break;
    //   case '/talk':
    //     require('/imports/ui/views/talk-view.html');
    //     break;
    //   case '/':
    //     require('/imports/ui/views/signup-view.html');
    //     break;
    //   case '/signup':
    //     require('/imports/ui/views/signup-view.html');
    // }

    true || require("/imports/ui/views/signup-view.html");
    true || require("/imports/ui/views/search-view.html");
    true || require("/imports/ui/views/messages-view.html");
    true || require("/imports/ui/views/profile-view.html");
    true || require("/imports/ui/views/talk-view.html");


    path === '/' ? require(`/imports/ui/views/signup-view.html`) : require(`/imports/ui/views${path}-view.html`);
    this.notify();
  }
});
</script>
